<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8">
<title>Qazaq Sign AI</title>

<!-- MediaPipe -->
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<style>
body {
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg,#e8f0ff,#fce8ff);
  margin: 0;
  padding: 0;
}
header {
  padding: 20px;
  text-align: center;
  font-size: 26px;
  font-weight: bold;
}
.container {
  max-width: 420px;
  margin: auto;
  background: white;
  border-radius: 24px;
  padding: 20px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.15);
}
.section {
  margin-bottom: 20px;
}
.section h3 {
  margin-bottom: 8px;
}
input, button {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  margin-top: 6px;
  border-radius: 12px;
  border: 1px solid #ccc;
}
button {
  background: #4f46e5;
  color: white;
  border: none;
}
video, canvas {
  width: 100%;
  border-radius: 16px;
  margin-top: 10px;
}
#result {
  font-size: 22px;
  font-weight: bold;
  text-align: center;
  margin-top: 10px;
}
footer {
  text-align: center;
  font-size: 12px;
  opacity: 0.6;
  margin-top: 10px;
}
</style>
</head>

<body>

<header>ü§ñ Qazaq Sign AI</header>

<div class="container">

  <!-- TEXT ‚Üí SIGN -->
  <div class="section">
    <h3>‚úçÔ∏è “ö–∞–∑–∞“õ—à–∞ —Å”©–∑ ‚Üí –ñ–µ—Å—Ç</h3>
    <input id="textInput" placeholder="–ú—ã—Å–∞–ª—ã: —Å”ô–ª–µ–º">
    <button onclick="textToSign()">–ê—É–¥–∞—Ä—É</button>
    <video id="avatar" controls></video>
  </div>

  <!-- CAMERA ‚Üí TEXT -->
  <div class="section">
    <h3>üì∑ –ñ–µ—Å—Ç ‚Üí “ö–∞–∑–∞“õ—à–∞ —Å”©–∑</h3>
    <video id="camera" autoplay muted></video>
    <canvas id="canvas"></canvas>
    <div id="result">–ö“Ø—Ç—ñ–ª—É–¥–µ‚Ä¶</div>
  </div>

</div>

<footer>
AI-assisted prototype ‚Ä¢ Kazakh Sign Language
</footer>

<script>
// TEXT ‚Üí SIGN
const avatar = document.getElementById("avatar");
const dict = {
  "—Å”ô–ª–µ–º": "https://www.signingsavvy.com/media/mp4-ld/1/1678.mp4",
  "—Ä–∞—Ö–º–µ—Ç": "https://www.signingsavvy.com/media/mp4-ld/1/1906.mp4",
  "–∏”ô": "https://www.signingsavvy.com/media/mp4-ld/1/1267.mp4",
  "–∂–æ“õ": "https://www.signingsavvy.com/media/mp4-ld/1/1252.mp4"
};

function textToSign() {
  const word = textInput.value.toLowerCase().trim();
  if (dict[word]) {
    avatar.src = dict[word];
    avatar.play();
  } else {
    alert("–ë“±–ª —Å”©–∑ MVP –±–∞–∑–∞—Å—ã–Ω–¥–∞ –∂–æ“õ");
  }
}

// CAMERA ‚Üí TEXT
const camEl = document.getElementById("camera");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const result = document.getElementById("result");

canvas.width = 400;
canvas.height = 300;

const hands = new Hands({
  locateFile: f => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${f}`
});

hands.setOptions({
  maxNumHands: 1,
  minDetectionConfidence: 0.7,
  minTrackingConfidence: 0.7
});

hands.onResults(res => {
  ctx.drawImage(camEl,0,0,canvas.width,canvas.height);
  if (res.multiHandLandmarks) {
    const lm = res.multiHandLandmarks[0];
    if (lm[4].y < lm[3].y) result.innerText = "–ò”ò üëç";
    else if (lm[8].y > lm[6].y) result.innerText = "–†–ê–•–ú–ï–¢ ‚úä";
    else result.innerText = "–°”ò–õ–ï–ú ‚úã";
  }
});

const camera = new Camera(camEl,{
  onFrame: async () => {
    await hands.send({image: camEl});
  },
  width: 400,
  height: 300
});
camera.start();
</script>

</body>
</html>
